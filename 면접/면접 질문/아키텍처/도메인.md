## 구글 권장 아키텍처에서 도메인 레이어 심층 분석

구글 권장 아키텍처에서 **도메인 레이어**는 앱의 핵심적인 역할을 수행하는 계층이다. 마치 건물의 뼈대와 같이, 앱의 주요 기능과 규칙들이 이 레이어에 담겨 있습니다. 특히 UI 레이어(화면을 보여주는 부분)와 데이터 레이어(데이터를 저장하고 가져오는 부분) 사이에서 중요한 다리 역할을 하며, 데이터 레이어의 사용 방법을 감추고 필요한 기능만 제공하여 **추상화**하고, 관련된 비즈니스 로직들을 한 곳에 모아 **캡슐화**하는 역할을 합니다.

핵심적으로 도메인 레이어는 여러 화면(ViewModel)에서 **반복적으로 사용될 수 있는 비즈니스 로직들을 한 곳에 모아 관리**하는 역할을 합니다. 여기서 **비즈니스 로직**이란, 앱이 특정 목표를 달성하기 위해 거쳐야 하는 **구체적인 단계와 규칙들의 모음**을 의미합니다.

**예시:**

**이메일 보내기 (SendEmailUseCase)**

이 UseCase의 주된 목표는 사용자가 작성한 이메일을 성공적으로 상대방에게 전달하는 것입니다. 이 목표를 달성하기 위한 비즈니스 로직은 다음과 같이 구성될 수 있습니다.

1.  **이메일 보내기:** 실제로 네트워크를 통해 이메일 서버에 접속하여 작성된 이메일 데이터를 전송하는 과정입니다. 이 과정에는 어떤 통신 방식을 사용할지, 데이터를 어떻게 암호화할지 등의 세부 규칙들이 포함될 수 있습니다.
2.  **보낸 메일함에 저장:** 사용자가 추후에 자신이 보낸 이메일을 확인할 수 있도록, 성공적으로 전송된 이메일의 내용을 앱 내부의 저장 공간(로컬 데이터베이스 등)에 기록하는 과정입니다.

이처럼 "이메일을 보내고 보낸 메일함에 저장한다"는 하나의 사용자 목표를 달성하기 위해 필요한 **일련의 논리적인 단계와 규칙**들이 바로 비즈니스 로직에 해당합니다.

**회원가입 (SignUpUseCase)**

또 다른 예시로, 사용자가 앱에 새로운 계정을 만드는 회원가입 기능을 생각해 봅시다.

**비즈니스 로직:**

1.  **사용자 입력 정보 수집:** 화면에서 사용자가 입력한 이름, 이메일 주소, 비밀번호 등의 정보를 가져옵니다.
2.  **입력 유효성 검증:** 수집된 정보가 미리 정해진 규칙에 맞는지 확인합니다. 예를 들어, 비밀번호는 특정 길이 이상이어야 하고, 이메일 주소 형식이 올바른지 등을 검사합니다.
3.  **회원가입 요청 전송:** 유효성 검증을 통과한 사용자 정보를 서버로 전송하여 새로운 계정을 생성하도록 요청합니다. 이 과정은 네트워크 통신을 포함합니다.
4.  **가입 완료 알림:** 서버로부터 회원가입 성공 응답을 받으면, 사용자에게 가입이 완료되었음을 알리는 메시지나 화면을 보여줍니다.

**도메인 레이어의 장점:**

* **코드 재사용성 증대:** 유사한 비즈니스 로직이 여러 ViewModel에서 필요할 때, 도메인 레이어에 정의된 UseCase를 재사용함으로써 코드의 중복을 크게 줄일 수 있습니다. 이는 개발 효율성을 높이고 유지보수를 용이하게 합니다.
* **비즈니스 로직의 정확성 향상:** 비즈니스 로직을 한 곳에서 관리함으로써, 여러 곳에서 동일한 로직을 구현할 때 발생할 수 있는 실수를 줄이고 일관성을 유지할 수 있습니다.
* **UI 레이어의 단순화:** ViewModel은 복잡한 비즈니스 로직을 직접 처리하는 대신, 도메인 레이어의 UseCase를 호출하여 필요한 작업을 수행하고, UI 상태 관리에만 집중할 수 있게 됩니다. 이는 UI 레이어의 코드를 더 깔끔하고 이해하기 쉽게 만들어 줍니다.

**도메인 레이어의 규칙:**

* **단일 책임 원칙:** 하나의 UseCase는 오직 **하나의 명확한 기능**만을 수행해야 합니다. 여러 개의 목표를 하나의 UseCase에 담는 것은 유지보수를 어렵게 만들 수 있습니다.
* **불변성 유지:** UseCase는 실행 과정에서 **변경 가능한 데이터를 직접 가지고 있으면 안 됩니다.** 필요한 데이터는 외부에서 (주로 ViewModel을 통해) 전달받고, 결과를 반환하는 방식으로 작동해야 합니다.
* **명명 규칙:** UseCase의 이름은 그 기능을 명확하게 나타낼 수 있도록 **현재 시제 동사 + 명사/대상(선택 사항) + UseCase** 형태로 짓는 것이 권장됩니다. 이는 코드의 가독성을 높이고 어떤 기능을 하는 UseCase인지 쉽게 파악할 수 있도록 돕습니다.

    * **예시:**
        * `ReadBookUseCase`: 책을 읽는 기능을 수행
        * `SendMessageUseCase`: 메시지를 보내는 기능을 수행
        * `MakePaymentUseCase`: 결제를 처리하는 기능을 수행

**UseCase와 데이터 레이어의 의존성:**

UseCase는 앱의 기능을 수행하기 위해 데이터가 필요합니다. 이때 UseCase는 **데이터 레이어의 Repository 인터페이스에 의존**합니다. 이는 UseCase가 실제 데이터가 어떻게 저장되고 관리되는지에 대한 구체적인 구현 details에는 신경 쓰지 않고, 필요한 데이터를 추상화된 인터페이스를 통해 요청할 수 있도록 합니다. 이러한 의존성 관리는 도메인 레이어를 데이터 레이어의 변경으로부터 보호하고, 더 유연하고 테스트하기 쉬운 코드를 만들 수 있도록 돕습니다.

결론적으로, 구글 권장 아키텍처에서 도메인 레이어는 앱의 핵심 비즈니스 로직을 중앙 집중식으로 관리하고, UI 레이어와 데이터 레이어 사이의 의존성을 낮추어 앱의 전체적인 구조를 더욱 견고하고 유지보수하기 쉽게 만들어주는 중요한 역할을 수행합니다.
