HTTP(Hypertext Transfer Protocol)

HTTP의 연결 과정

HTTP는 

TCP 연결 -> HTTP 요청 -> HTTP 응답 -> TCP 연결 종료 
으로 이뤄진다

그러나 HTTP 통신 하나하나마다 TCP 연결을 하고 끊는것이 너무 비 효율적이여서 

HTTP 1.1에서는 기본적으로 TCP 연결을 종료하지 않고 HTTP 통신을 여러번 할수있게 바뀌었다
이걸 Keep-Alive, Persistent Connection이라고 한다

HTTP 2 에서는 한 TCP 연결에서 병렬로 여러 응답과 요청을 동시에 처리할수 있다
이걸 멀티 플랙싱 이라고 한다

그리고 이런 TCP 연결들을 저장해두는곳이 Connection Pool 이다


HTTP의 요청

HTTP의 요청은 

요청라인, 요청 헤더, CRLF(빈줄), 요청 바디가 있다

우선 요청 라인은 메서드, 서버 내의 경로(엔드포인트), HTTP 버전이 있다

```http
<메서드> <요청 URL(경로)> <HTTP 버전>

GET /index.html HTTP/1.1
```

우선 메서드는 요청이 어떤 동작을 하길 원하는지 알려준다 GET, POST, PUT, PATCH, DELETE 같은 메서드가 있다

엔드포인트는 서버 안에서 특정 리소스를 가리키는 경로이다
서버는 엔드포인트와 메서드의 조합으로 어떤 동작을 할지 결정한다

다음은 HTTP 버전인데 주로 사용하는 버전들은 

| 버전       | 특징                   | 주요 차이점                                         |
|:---------|:---------------------|:-----------------------------------------------|
| HTTP/1.0 | (1996) 기본적인 HTTP 완성  | 헤더 도입, 상태코드 추가, 하지만 연결 재사용 불가                  |
| HTTP/1.1 | (1997) **표준화된 HTTP** | Keep-Alive(연결 재사용), 파이프라이닝, Host 헤더            |
| HTTP/2   | (2015) 속도 혁신!        | 하나의 연결로 다중 요청 처리 (Multiplexing), 헤더 압축 (HPACK) |
| HTTP/3   | (2022) 최첨단           | TCP 대신 QUIC(UDP 기반) 사용, 지연시간 엄청 줄임             |

이렇게 있다


다음은 요청 헤더이다 기본구조는 Key: Value 형태이다
헤더는 따로 개수 재한은 없다
주요 헤더는

| 헤더              | 설명                         | 예시                                             |
|:----------------|:---------------------------|:-----------------------------------------------|
| `Host`          | 요청하는 서버 **도메인**            | `Host: (https:// 는 때고 도메인만) example.com`       |
| `User-Agent`    | 요청하는 클라이언트의 정보 (브라우저/앱 종류) | `User-Agent: Mozilla/5.0 (Android 14; Mobile)` |
| `Accept`        | 클라이언트가 원하는 응답 타입           | `Accept: application/json`                     |
| `Authorization` | 인증정보 (토큰, Basic Auth 등)    | `Authorization: Bearer <token>`                |
| `Content-Type`  | 보낼 데이터의 타입                 | `Content-Type: application/json`               |
| `Cookie`        | 쿠키값 전송                     | `Cookie: sessionId=abc123`                     |

이런것들이 있다

다음 빈줄은 그저 헤더와 바디를 구분해주는 줄이다

그 다음 바디는 실제로 요청할때 필요한 정보를 넘겨주는곳이다 
바디에는 문자열, JSON, 파일같은 정보가 들어갈수 있는데 이 정보들의 타입을 Content-Type 헤더로 명시를 해줘야 한다

다음은 HTTP응답인데

응답은
상태라인 (Status Line)
헤더들 (Headers)
바디 (Body) 로 이뤄져있다

상태라인은 

HTTP-<버전> <상태코드> <상태메시지> 으로 이뤄져있고 
버전에는 HTTP의 버전, 상태코드에는 요청에대한 처리에 대한 코드(404, 200)
그리고 상태 메시지에는 서버에서 클라이언트한테 전달할말을 적는다(예시: OK, Not Found) 이 메시지는 기본적으로 HTTP 표준을 사용하고 서버가 커스텀 메시지를 보낼수 있다

헤더는 요청과 같은 형식으로 오고 바디의 타입, 쿠키값, 바디 데이터 크기, 연결방식 같은것들을 설정한다

바디에는 요청에서 요청한 데이터를 준다